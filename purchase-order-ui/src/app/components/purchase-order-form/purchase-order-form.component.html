<div class="container">
  <div class="header">
    <h1>{{ getTitle() }}</h1>
    <button class="btn btn-secondary" (click)="onCancel()">
      <i class="fas fa-arrow-left"></i> Back to List
    </button>
  </div>

  <!-- Loading Indicator -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Loading purchase order...</p>
  </div>

  <!-- Form -->
  <div *ngIf="!loading" class="form-container">
    <form [formGroup]="purchaseOrderForm" (ngSubmit)="onSubmit()" class="purchase-order-form">
      
      <div class="form-row">
        <div class="form-group">
          <label for="poNumber" class="required">PO Number</label>
          <input 
            type="text" 
            id="poNumber" 
            formControlName="poNumber" 
            class="form-control"
            [ngClass]="{'is-invalid': isFieldInvalid('poNumber')}"
            placeholder="Enter PO Number">
          <div *ngIf="isFieldInvalid('poNumber')" class="error-message">
            {{ getFieldError('poNumber') }}
          </div>
        </div>

        <div class="form-group">
          <label for="supplierName" class="required">Supplier Name</label>
          <input 
            type="text" 
            id="supplierName" 
            formControlName="supplierName" 
            class="form-control"
            [ngClass]="{'is-invalid': isFieldInvalid('supplierName')}"
            placeholder="Enter Supplier Name">
          <div *ngIf="isFieldInvalid('supplierName')" class="error-message">
            {{ getFieldError('supplierName') }}
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="orderDate" class="required">Order Date</label>
          <input 
            type="date" 
            id="orderDate" 
            formControlName="orderDate" 
            class="form-control"
            [ngClass]="{'is-invalid': isFieldInvalid('orderDate')}">
          <div *ngIf="isFieldInvalid('orderDate')" class="error-message">
            {{ getFieldError('orderDate') }}
          </div>
        </div>

        <div class="form-group">
          <label for="totalAmount" class="required">Total Amount</label>
          <div class="amount-input-group">
            <span class="currency-symbol">$</span>
            <input 
              type="number" 
              id="totalAmount" 
              formControlName="totalAmount" 
              class="form-control amount-input"
              [ngClass]="{'is-invalid': isFieldInvalid('totalAmount')}"
              placeholder="0.00"
              step="0.01"
              min="0">
          </div>
          <div *ngIf="isFieldInvalid('totalAmount')" class="error-message">
            {{ getFieldError('totalAmount') }}
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="status" class="required">Status</label>
          <select 
            id="status" 
            formControlName="status" 
            class="form-control"
            [ngClass]="{'is-invalid': isFieldInvalid('status')}">
            <option *ngFor="let status of getStatusOptions()" [value]="status.value">
              {{ status.label }}
            </option>
          </select>
          <div *ngIf="isFieldInvalid('status')" class="error-message">
            {{ getFieldError('status') }}
          </div>
        </div>

        <div class="form-group description-group">
          <label for="description">Description</label>
          <textarea 
            id="description" 
            formControlName="description" 
            class="form-control"
            [ngClass]="{'is-invalid': isFieldInvalid('description')}"
            placeholder="Enter description (optional)"
            rows="3"></textarea>
          <div *ngIf="isFieldInvalid('description')" class="error-message">
            {{ getFieldError('description') }}
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button 
          type="button" 
          class="btn btn-secondary" 
          (click)="onCancel()"
          [disabled]="submitting">
          Cancel
        </button>
        <button 
          type="submit" 
          class="btn btn-primary" 
          [disabled]="purchaseOrderForm.invalid || submitting">
          <span *ngIf="submitting" class="spinner-small"></span>
          {{ isEditMode ? 'Update' : 'Create' }} Purchase Order
        </button>
      </div>
    </form>
  </div>
</div>
